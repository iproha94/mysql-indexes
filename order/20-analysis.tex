\chapter{Аналитический раздел}

Одной из главных причин низкой скорости обработки запросов является работа с базой данных (БД), которая не оптимизирована: нерациональные запросы, некорректное использование индексов, неоптимальные значения параметров конфигурации. 

Оптимизация производительности сводится к следующим задачам: 
\begin{enumerate}
    \item корректировка параметров СУБД;
    \item денормализация данных;
    \item выявление медленных запросов и их анализ:
        \begin{enumerate}
            \item корректировка запросов;
            \item создание индексов.
        \end{enumerate}
\end{enumerate}

Основным приемом увеличения производительности выполнения запросов к базе данных является индексирование. Индексы представляют собой структуры, которые помогают MySQL эффективно извлекать данные. Они критичны для достижения хорошей производительности, но многие часто забывают о них или плохо понимают их смысл, поэтому индексирование является главной причиной проблем с производительностью в реальных условиях. \cite{zaitsev}

В основном индексы находятся в памяти и поэтому увеличивают производительность путем оптимизации обращений к дисковой памяти.

Индексы следует создавать по мере обнаружения медленных запросов. В этом поможет \textit{slow log} в MySQL. Запросы, которые выполняются более 1 секунды, являются первыми кандидатами на оптимизацию. \cite{ruhighload-mysql-indexes} Конечно, говорить о том, сколько секунд считать медленным запросом зависит от конкретной задачи. В основном такие запросы используют JOIN оператор для соединения двух и более таблиц.

СУБД решают задачу выбора индекса для выполнения конкретного sql запроса на БД, заполненной реальными данными. Чтобы понять, какой индекс необходимо построить для оптимизации выполнения sql запроса администратору БД необходимо учитывать:
\begin{enumerate}
    \item реальные данные, которыми заполнена БД
    \item статистику запросов;
    \item правила работы СУБД с индексами;
    \item правила работы СУБД при соединении таблиц (для сложных запросов).
\end{enumerate}

Если абстрагироваться от реальных данных и статистики запросов, то зная правила работы СУБД можно сделать предположения, какие индексы могла бы использовать СУБД. 

В данной работе предлагаются алгоритмы, которые по заданному sql запросу вернут список индексов, которые могли бы использоваться СУБД при выполнении этого запроса. Предложенные алгоритмы облегачат работу администраторов БД, которым останется только принять решение, какой именно индекс построить из предложенного списка возможных индексов.

\input{21-indexes-structure}

\input{22-simple-index}

\input{23-join-index}