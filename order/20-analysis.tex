\chapter{Аналитический раздел}

Одной из главных причин низкой скорости обработки запросов является работа с базой данных (БД), которая не оптимизирована: нерациональные запросы, некорректное использование индексов, неоптимальные значения параметров конфигурации. 

Оптимизация производительности сводится к следующим задачам: 
\begin{enumerate}
\item корректировка параметров СУБД;
\item денормализация данных (при необходимости);
\item выявление медленных запросов, их анализ;
\item корректировка запросов;
\item создание индексов.
\end{enumerate}

Основным приемом увеличения производительности выполнения запросов к базе данных является индексирование. Индексы представляют собой структуры, которые помогают MySQL эффективно извлекать данные. Они критичны для достижения хорошей производительности, но многие часто забывают о них или плохо понимают их смысл, поэтому индексирование является главной причиной проблем с производительностью в реальных условиях. \cite{zaitsev}

Индексы увеличивают производительность путем оптимизации обращений к дисковой памяти.

Индексы следует создавать по мере обнаружения медленных запросов. В этом поможет \textit{slow log} в MySQL. Запросы, которые выполняются более 1 секунды, являются первыми кандидатами на оптимизацию. \cite{ruhighload-mysql-indexes} Конечно, говорить о том, сколько секунд считать медленным запросом зависит от конкретной задачи. В основном такие запросы используют JOIN оператор для соединения двух и более таблиц.

Задачу выбора индекса для конкретного sql запроса на БД, заполненной реальными данными, решают СУБД. На текущий момент даже сами БД не справляются с этой задачей. Но если абстрагироваться от реальных данных, которыми заполнена СУБД и статистики запросов, то зная правила работы СУБД с индексами можно сделать предположения, какие индексы могла бы использовать СУБД. В данной работе предлагаются алгоритмы, которые по заданному sql запросу вернут список индексов, которые могли бы использоваться СУБД при выполнении этого запроса. Дальше, администратор БД примет решение, какой именно индекс построить из предложенного списка.

\input{21-indexes-in-innodb}

\input{21-simple-index}

\input{22-join-index}